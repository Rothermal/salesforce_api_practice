function enable(){$("#fruitContainer").on("click",".fruit-button",buyFruit),$("#fruitContainer").on("click",".sell-button",sellFruit),$(".start").on("click",startGame)}function updateBankDom(){$(".bank").empty();var a=$(".bank");a.text("$"+user.totalCash.toFixed(2))}function buildDomFruits(a){$("#fruitContainer").empty();for(var b=0;b<a.length;b++){$("#fruitContainer").append("<div class='fruit-button container col-sm-3 "+a[b].name.toLowerCase()+"-buy''></div>");var c=$("#fruitContainer").children().last();c.data("fruit",a[b].name),c.data("price",a[b].price),c.append("<p>"+a[b].name+"</p>"),c.append("<p class='fruit-price'>"+a[b].price.toFixed(2)+"</p>"),c.append("<button class='btn btn-warning sell-button'>Sell</button>"),a[b].element=c}updateBankDom()}function updateFruitDom(){for(var a=0;a<fruitArray.length;a++){var b=fruitArray[a];b.price=parseFloat((Math.round(100*b.price)/100).toFixed(2)),b.element.find(".fruit-price").text("$"+b.price.toFixed(2)),b.element.data("price",b.price)}updateBankDom()}function Fruit(a,b){this.name=a,this.price=b,this.changePrice=function(){var a=randomNumber(minSwing,maxSwing),b=randomNumber(1,2);1==b&&(a=-a),a/=100,this.price+=a,this.price>maxPrice&&(this.price=maxPrice),this.price<minPrice&&(this.price=minPrice)}}function User(){this.totalCash=startingCash}function startGame(){var a=$(this).data("text");getGameId(),timer=setInterval(gameInterval,gameIntervalTime),updateGameVariables(a)}function disable(){clearInterval(timer)}function gameInterval(){if(gameRounds--,0===gameRounds)disable(),console.log("Game Over");else{for(var a=0;a<fruitArray.length;a++)fruitArray[a].changePrice();updateFruitDom()}}function updateGameVariables(a){var b=a;b||(b="Standard"),$.ajax({type:"GET",url:"/salesforce/gameSettings/"+b,success:function(a){startingCash=a.starting_cash__c,fruitArray=a.fruits__c.split(";"),gameRounds=a.game_length__c,user=new User,buildFruits(fruitArray),buildDomFruits(fruitArray)}})}function getGameId(){$.ajax({type:"GET",url:"salesforce/start",success:function(a){console.log("game id",a)}})}function buyFruit(){var a=$(this).data("fruit"),b=$(this).data("price");user.totalCash>=b&&(user.totalCash-=b,postFruit(a,b),updateBankDom())}function sellFruit(){var a=$(this).parent().data("fruit"),b=$(this).parent().data("price");console.log("fruit and price inside sell",a,b),console.log(user["inv"+a]);var c=user["inv"+a].pop();user.totalCash+=b,console.log(c),updateFruit(c,b),updateBankDom()}function postFruit(a,b){var c={name:a,price:b};console.log("fruit, price in post route client side",c),$.ajax({type:"POST",url:"/salesforce/buyFruit",data:c,success:function(b){console.log("fruit id",b),console.log("fruit type",a),user["inv"+a].push(b),console.log("in post fruit, on success, user inventory ",user)}})}function updateFruit(a,b){var c={id:a,price:b};$.ajax({type:"PUT",url:"/salesforce/sellFruit",data:c,success:function(a){console.log("sell fruit response",a)}})}function buildFruits(a){for(var b=0;b<a.length;b++){var c=new Fruit(a[b],startingPrice);a[b]=c,c.changePrice(),user["inv"+c.name]=[]}console.log("user in build fruits",user)}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}var fruitArray=["Apples","Oranges","Bananas","Pears"],startingPrice=5,minSwing=1,maxSwing=50,minPrice=.5,maxPrice=9.99,gameIntervalTime=5e3,gameRounds=60,startingCash=100,timer,user;$(document).ready(function(){init()});var init=function(){console.log("jquery initalized"),enable()};
//# sourceMappingURL=client.map
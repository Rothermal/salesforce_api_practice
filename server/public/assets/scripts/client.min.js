function buildFruits(a){for(var b=0;b<a.length;b++){var c=new Fruit(a[b],startingPrice);a[b]=c,c.changePrice(),user["inv"+c.name]=[]}}function buildDomFruits(a){$("#fruitContainer").empty();for(var b=0;b<a.length;b++){$("#fruitContainer").append("<div class='container col-sm-3 "+a[b].name.toLowerCase()+"-buy''></div>");var c=$("#fruitContainer").children().last();c.data("fruit",a[b].name),c.data("price",a[b].price),c.append("<p>"+a[b].name+"</p>"),c.append("<p class='fruit-price'>"+a[b].price.toFixed(2)+"</p>"),c.append("<button class='btn btn-warning fruit-button'>Buy</button>"),c.append("<button class='btn btn-warning sell-button'>Sell</button>"),a[b].element=c}updateBankDom()}function updateBankDom(){console.log("t cash in bank dom",user.totalCash),$(".bank").empty();var a=$(".bank");a.text("$"+user.totalCash.toFixed(2))}function updateFruitDom(){for(var a=0;a<fruitArray.length;a++){var b=fruitArray[a];b.price=parseFloat((Math.round(100*b.price)/100).toFixed(2)),b.element.find(".fruit-price").text("$"+b.price.toFixed(2)),b.element.data("price",b.price)}}function updateGameVariables(a){var b=a;b||(b="Standard"),$.ajax({type:"GET",url:"/salesforce/gameSettings/"+b,success:function(a){startingCash=a.starting_cash__c,fruitArray=a.fruits__c.split(";"),gameRounds=a.game_length__c,user=new User,buildFruits(fruitArray),buildDomFruits(fruitArray)}})}function Fruit(a,b){this.name=a,this.price=b,this.changePrice=function(){var a=randomNumber(minSwing,maxSwing),b=randomNumber(1,2);1==b&&(a=-a),a/=100,this.price+=a,this.price>maxPrice&&(this.price=maxPrice),this.price<minPrice&&(this.price=minPrice)}}function User(){this.totalCash=startingCash}function enable(){$("#fruitContainer").on("click",".fruit-button",buyFruit),$("#fruitContainer").on("click",".sell-button",sellFruit),$(".start").on("click",startGame)}function disable(){clearInterval(timer),$(".sell-button").prop("disabled",!0),$(".fruit-button").prop("disabled",!0)}function startGame(){var a=$(this).data("text");getGameId(),timer=setInterval(gameInterval,gameIntervalTime),updateGameVariables(a)}function gameInterval(){if(gameRounds--,0===gameRounds)disable(),console.log("Game Over");else{for(var a=0;a<fruitArray.length;a++)fruitArray[a].changePrice();updateFruitDom()}}function getGameId(){$.ajax({type:"GET",url:"salesforce/start",success:function(a){console.log("game id",a)}})}function buyFruit(){var a=$(this).parent().data("fruit"),b=$(this).parent().data("price"),c=$(this);user.totalCash>=b&&(user.totalCash-=b,$(this).prop("disabled",!0),postFruit(a,b,c),updateBankDom())}function sellFruit(){var a=$(this).parent().data("fruit"),b=$(this).parent().data("price"),c=$(this);if(user["inv"+a].length>0){var d=user["inv"+a].splice(0,1);user.totalCash+=b,$(this).prop("disabled",!0),updateFruit(d,b,c),updateBankDom()}}function postFruit(a,b,c){var d={name:a,price:b};$.ajax({type:"POST",url:"/salesforce/buyFruit",data:d,success:function(b){user["inv"+a].push(b),c.prop("disabled",!1)}})}function updateFruit(a,b,c){var d={id:a,price:b};$.ajax({type:"PUT",url:"/salesforce/sellFruit",data:d,success:function(a){console.log("sell fruit response",a),c.prop("disabled",!1)}})}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}var fruitArray=["Apples","Oranges","Bananas","Pears"],startingPrice=5,minSwing=1,maxSwing=50,minPrice=.5,maxPrice=9.99,gameIntervalTime=5e3,gameRounds=60,startingCash=100,timer,user;$(document).ready(function(){init()});var init=function(){console.log("jquery initalized"),enable()};
//# sourceMappingURL=client.map
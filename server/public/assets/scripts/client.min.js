function Fruit(a,b,c,d,e){this.name=a,this.price=b,this.averagePrice=c,this.inventory=d,this.className=e,console.log(this)}function randomInitialPrice(){return randomNumber(50,999)}function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function buy(){console.log(this);var a=$(this).data("classname");for(console.log(a),i=0;i<fruits.length;i++)a==fruits[i].className&&cash>=fruits[i].price&&(cash-=fruits[i].price,fruits[i].inventory++,$("."+fruits[i].className+"-inventory").html(fruits[i].inventory),$(".bank").html(cash/100),fruits[i].averagePrice.push(fruits[i].price),$("."+fruits[i].className+"-expense").html("$"+Math.round(calcAverage(fruits[i].averagePrice))/100))}function calcAverage(a){for(var b=0,c=0;c<a.length;c++)b+=parseInt(a[c]);return b/a.length}function sell(){console.log(this);var a=$(this).data("classname");for(console.log(a),i=0;i<fruits.length;i++)a==fruits[i].className&&fruits[i].inventory>0&&(cash+=fruits[i].price,fruits[i].inventory--,$("."+fruits[i].className+"-inventory").html(fruits[i].inventory),$(".bank").html(cash/100))}function priceUpdate(){if(counter++,10==counter){for(b=0;b<fruits.length;b++)if(fruits[b].inventory>0){var a=0;a=fruits[b].inventory*fruits[b].price,fruits[b].inventory=0,$("."+fruits[b].className+"-inventory").html(fruits[b].inventory),cash+=a}$(".bank").html(cash/100),alert("Your you earned: $"+(cash-1e4)/100),clearInterval(timer)}for(var b=0;b<fruits.length;b++){var c=0;c=randomNumber(-50,50),fruits[b].price=fruits[b].price+c,fruits[b].price>=1e3?fruits[b].price-=49:fruits[b].price<50&&(fruits[b].price+=49),$("."+fruits[b].className+"-price").text(fruits[b].price/100)}}var STARTING_CASH=1e4,TOTAL_CASH=0,GAME_TIME=365,GAMEFRUITS=["Apple","Pear","Banana","Orange"],fruits=[],counter=0,timer,cash;$(document).ready(function(){init(),enable()});var init=function(){console.log("jquery initalized"),createFruit(),cash=STARTING_CASH},enable=function(){console.log("event listeners enabled"),$(".start").on("click",beginGame),$(".apple-buy").on("click",buy),$(".orange-buy").on("click",buy),$(".banana-buy").on("click",buy),$(".pear-buy").on("click",buy),$(".apple-sell").on("click",sell),$(".orange-sell").on("click",sell),$(".banana-sell").on("click",sell),$(".pear-sell").on("click",sell)},connecttoSF=function(){console.log("attempt to connect to salesforce"),$.ajax({type:"GET",url:"/salesforce/apple",success:function(a){console.log(a)}})},createFruit=function(){var a={};for(i=0;i<GAMEFRUITS.length;i++)a={},a.name=GAMEFRUITS[i]+"s",a.price=randomInitialPrice(),a.averagePrice=[],a.inventory=0,a.className=GAMEFRUITS[i].toLowerCase(),fruits.push(a);console.log("post create fruits",fruits)},beginGame=function(){timer=setInterval(priceUpdate,15e3),console.log("begin"),priceUpdate()};